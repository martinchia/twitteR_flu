flu <- twListToDF(searchTwitter("flu",n = 25, geocode='-33.871841,151.206709, 1000000mi'))
flu <- twListToDF(searchTwitter("flu",n = 25, geocode='-33.871841,151.206709, 1000000mi'))
flu <- twListToDF(searchTwitter("flu",n = 25, geocode='-33.871841,151.206709, 1000000mi'))
flu <- twListToDF(searchTwitter("flu",n = 25, geocode='-33.871841,151.206709, 1000000mi'))
flu <- twListToDF(searchTwitter("flu",n = 25, geocode='-33.871841,151.206709, 1000000mi'))
flu <- twListToDF(searchTwitter("flu",n = 25, geocode='-33.871841,151.206709, 1000000mi'))
max(flu$id)
flu$id
flu <- subset(flu, is.null(longitude))
flu
flu <- twListToDF(searchTwitter("flu",n = 25, geocode='-33.871841,151.206709, 1000000mi'))
subset(flu, is.null(longitude))
flu[!is.null(flu$latitude)]
flu[flu$latitude != "NA"]
flu[flu$latitude == "NA"]
flu[flu$latitude = "NA"]
flu$latitude
flu[is.na(flu$latitude)]
flu[is.na(latitude)]
subset(flu, is.na(longitude))
subset(flu, !is.na(longitude))
s<- subset(flu, !is.na(longitude))
dim(s)
dim(s)[0]
dim(s)[0] == 0
if(dim(s)[0] == 0){
print("dd")
}
length(s)
is.empty.model(s)
if(dim(s)[0] == 0){
print("dd")
}
dim(s)[0]
if(dim(s)[0] > 0){
print("dd")
}
if(nrow(s) > 0){
print("dd")
}
searchTwitter("#flu" + "flu" + "influenza" + "#influenza",
n = 25, sinceID = id.max)
searchTwitter("#flu+flu",
n = 25, sinceID = id.max)
id.max <- max(flu$id)
searchTwitter("#flu+flu",
n = 25, sinceID = id.max)
write.csv(subset(flu, !is.na(longitude)),file = "flu.csv")
setwd("D:\\OneDrive\\study\\data intensive computing\\L1P3\\twitteR_flu\\script")
write.csv(subset(flu, !is.na(longitude)),file = "flu.csv")
head(flu)
while(TRUE){
flu <- twListToDF(searchTwitter("#flu+flu+#influenza+influenza+fever",
n = 25, sinceID = id.max))
id.max <- max(flu$id)
temp <- subset(flu, !is.na(longitude))
if(nrow(temp)>0){
write.csv(temp,file = "flu.csv",append = TRUE, col.names = F)
}
}
twListToDF(searchTwitter("#flu+flu+#influenza+influenza+fever",
n = 25, sinceID = id.max))
setup_twitter_oauth("dhD8bw5qfjh50dsJW7PStPGQ4",
"cHobMyPYeREhKkhgh5o329AHygFKM2WQt9El1v38OOZ98OyUvh")
flu <- twListToDF(searchTwitter("flu",n = 25, geocode='-33.871841,151.206709, 1000000mi'))
id.max <- max(flu$id)
while(TRUE){
flu <- twListToDF(searchTwitter("#flu+flu+#influenza+influenza+fever",
n = 25, sinceID = id.max))
id.max <- max(flu$id)
temp <- subset(flu, !is.na(longitude))
if(nrow(temp)>0){
write.csv(temp,file = "flu.csv",append = TRUE, col.names = F)
}
}
twListToDF(searchTwitter("flu",n = 25, geocode='-33.871841,151.206709, 1000000mi'))
searchTwitter("#flu+flu+#influenza+influenza+fever",
n = 25, sinceID = id.max)
searchTwitter("flu+influenza+fever",
n = 25, sinceID = id.max)
searchTwitter("flu",
n = 25, sinceID = id.max)
flu <- twListToDF(searchTwitter("flu",n = 25, geocode='-33.871841,151.206709, 1000000mi'))
id.max <- max(flu$id)
flu
while(TRUE){
flu <- twListToDF(searchTwitter("flu",
n = 25, sinceID = id.max))
id.max <- max(flu$id)
temp <- subset(flu, !is.na(longitude))
if(nrow(temp)>0){
write.csv(temp,file = "flu.csv",append = TRUE, col.names = F)
}
}
flu$id
flu <- twListToDF(searchTwitter("flu",n = 25, geocode='-33.871841,151.206709, 1000000mi'))
id.max <- max(flu$id)
while(TRUE){
flu <- twListToDF(searchTwitter("flu",
n = 25, maxID = id.max))
id.max <- max(flu$id)
temp <- subset(flu, !is.na(longitude))
if(nrow(temp)>0){
write.csv(temp,file = "flu.csv",append = TRUE, col.names = F)
}
}
max(flu$id)
id.max <- max(flu$id)
while(TRUE){
flu <- twListToDF(searchTwitter("flu+fever+influenza",
n = 25, maxID = id.max))
id.max <- max(flu$id)
temp <- subset(flu, !is.na(longitude))
if(nrow(temp)>0){
write.csv(temp,file = "flu.csv",append = TRUE, col.names = F)
}
}
max(flu$id)
flu <- twListToDF(searchTwitter("flu+fever+influenza",n = 25, geocode='-33.871841,151.206709, 1000000mi'))
flu <- twListToDF(searchTwitter("flu+fever+influenza",n = 25, geocode='-33.871841,151.206709, 1000000mi'))
setup_twitter_oauth("dhD8bw5qfjh50dsJW7PStPGQ4",
"cHobMyPYeREhKkhgh5o329AHygFKM2WQt9El1v38OOZ98OyUvh")
flu <- twListToDF(searchTwitter("flu+fever+influenza",n = 25, geocode='-33.871841,151.206709, 1000000mi'))
flu <- twListToDF(searchTwitter("flu+fever+influenza",n = 25, geocode='-33.871841,151.206709, 1000000mi'))
flu <- twListToDF(searchTwitter("flu+fever+influenza", retryOnRateLimit = 2000,n = 1))
flu <- twListToDF(searchTwitter("flu+fever+influenza",
n = 20000, maxID = id.max))
flu <- twListToDF(searchTwitter("flu+fever+influenza",
n = 20000))
flu <- twListToDF(searchTwitter("flu+fever+influenza",
n = 109))
temp <- subset(flu, !is.na(longitude))
temp
flu <- twListToDF(searchTwitter("flu", retryOnRateLimit = 2000,
n = 2000000))
flu
temp <- subset(flu, !is.na(longitude))
temp
flu <- twListToDF(searchTwitter("flu", n = 20000))
tail(flu)
tail(flu$id)
id.since <- tail(flu$id,1)
tail(flu$id,1)
flu <- twListToDF(searchTwitter("flu+fever+influenza",n = 1))
id.since <- tail(flu$id,1)
loop.times = 0
while(TRUE){
flu <- twListToDF(searchTwitter("flu", n = 2000, maxID = id.since))
id.since <- tail(flu$id,1)
temp <- subset(flu, !is.na(longitude))
if(nrow(temp)>0){
write.csv(temp,file = "flu.csv",append = TRUE, col.names = F)
}
loop.times <- loop.times + 1
Sys.sleep(22)
}
setwd("D:\\OneDrive\\study\\data intensive computing\\L1P3\\twitteR_flu\\script")
flu <- twListToDF(searchTwitter("flu+fever+influenza",n = 1))
id.since <- tail(flu$id,1)
loop.times = 0
while(TRUE){
flu <- twListToDF(searchTwitter("flu", n = 2000, maxID = id.since))
id.since <- tail(flu$id,1)
temp <- subset(flu, !is.na(longitude))
if(nrow(temp)>0){
write.csv(temp,file = "flu.csv",append = TRUE, col.names = F)
}
loop.times <- loop.times + 1
Sys.sleep(22)
}
loop.times = 0
while(TRUE){
flu <- twListToDF(searchTwitter("flu", n = 2000, maxID = id.since))
id.since <- tail(flu$id,1)
temp <- subset(flu, !is.na(longitude))
if(nrow(temp)>0){
write.table(temp,file = "flu.csv",append = TRUE, col.names = F)
}
loop.times <- loop.times + 1
Sys.sleep(22)
}
clc
loop.times = 0
rows = 0
while(rows < 20000){
flu <- twListToDF(searchTwitter("flu", n = 2000, maxID = id.since))
id.since <- tail(flu$id,1)
temp <- subset(flu, !is.na(longitude))
if(nrow(temp)>0){
write.csv(temp,file = "flu.csv",append = TRUE, col.names = F)
rows <- rows + nrow(temp)
}
loop.times <- loop.times + 1
Sys.sleep(30)
}
write.table(temp,file = "flu.csv",append = TRUE, col.names = F)
setwd("D:\\OneDrive\\study\\data intensive computing\\L1P3\\twitteR_flu\\script")
write.table(temp,file = "flu.csv",append = TRUE, col.names = F)
write.table(temp[,],file = "flu.csv",append = TRUE, col.names = F)
setwd("D:\\OneDrive\\study\\data intensive computing\\L1P3\\twitteR_flu\\script")
write.table(temp[,],file = "flu.csv",append = TRUE, col.names = F)
write.table(temp[,],file = "D:\\OneDrive\\study\\data intensive computing\\L1P3\\twitteR_flu\\script\\flu.csv"
,append = TRUE, col.names = F)
write.table(temp[,],file = "flu.csv",append = TRUE, col.names = F)
write.table(temp,file = "flu.csv",append = TRUE, col.names = F)
write.csv(temp,file = "flu.csv",append = TRUE, col.names = F)
write.table(temp,file = "flu.csv")
write.table(temp,file = "flu.csv",col.names = TRUE)
write.table(temp,file = "flu.csv",col.names = colnames(temp))
write.table(temp,file = "flu.csv",col.names = colnames(temp))
colnames(temp)
write.table(temp,file = "flu.csv",col.names = NA)
write.table(temp,file = "flu.csv",col.names = TRUE)
write.table(temp[2:,],file = "flu.csv",col.names = TRUE)
read.table("flu.csv",header = TRUE)
read.table("flu.csv")
read.table("flu.csv")
write.table(temp,file = "flu.csv",sep = ",",col.names = TRUE)
head(temp)
write.table(temp,file = "flu.csv",sep = ",",col.names = TRUE, row.names = F)
loop.times = 0
rows = 0
while(rows < 20000){
flu <- twListToDF(searchTwitter("flu", n = 2000, maxID = id.since))
id.since <- tail(flu$id,1)
temp <- subset(flu, !is.na(longitude))
if(nrow(temp)>0){
write.table(temp, "flu.csv",sep = ",", append=TRUE, col.names=!file.exists("flu.csv"), row.names = F)
rows <- rows + nrow(temp)
}
loop.times <- loop.times + 1
Sys.sleep(30)
}
while(rows < 20000){
flu <- twListToDF(searchTwitter("flu", n = 2000, maxID = id.since))
id.since <- tail(flu$id,1)
temp <- subset(flu, !is.na(longitude))
if(nrow(temp)>0){
write.table(temp, "flu.csv",sep = ",", append=TRUE, col.names=!file.exists("flu.csv"), row.names = F)
rows <- rows + nrow(temp)
}
loop.times <- loop.times + 1
Sys.sleep(60)
}
while(rows < 20000){
flu <- twListToDF(searchTwitter("flu", n = 2000, maxID = id.since, retryOnRateLimit = 120))
id.since <- tail(flu$id,1)
temp <- subset(flu, !is.na(longitude))
if(nrow(temp)>0){
write.table(temp, "flu.csv",sep = ",", append=TRUE, col.names=!file.exists("flu.csv"), row.names = F)
rows <- rows + nrow(temp)
}
loop.times <- loop.times + 1
Sys.sleep(30)
}
while(rows < 20000){
flu <- twListToDF(searchTwitter("flu", n = 2000, maxID = id.since, retryOnRateLimit = 120))
id.since <- tail(flu$id,1)
temp <- subset(flu, !is.na(longitude))
if(nrow(temp)>0){
write.table(temp, "flu.csv",sep = ",", append=TRUE, col.names=!file.exists("flu.csv"), row.names = F)
rows <- rows + nrow(temp)
}
loop.times <- loop.times + 1
Sys.sleep(30)
}
getCurRateLimitInfo()
rate <- getCurRateLimitInfo()
rate[,3]
rate[,4]
while(rows < 20000){
flu <- twListToDF(searchTwitter("flu", n = 2000, maxID = id.since, retryOnRateLimit = 2000))
id.since <- tail(flu$id,1)
temp <- subset(flu, !is.na(longitude))
if(nrow(temp)>0){
write.table(temp, "flu.csv",sep = ",", append=TRUE, col.names=!file.exists("flu.csv"), row.names = F)
rows <- rows + nrow(temp)
}
loop.times <- loop.times + 1
Sys.sleep(900)
}
getCurRateLimitInfo("/search/tweets")
getCurRateLimitInfo("search")
rate <- getCurRateLimitInfo("search")
rate[,2]
while(rows < 20000){
rate <- getCurRateLimitInfo("search")
if(as.numeric(rate[,3]) == 0){
time.reset <- as.POSIXct(rate[,4], tz="UTC")
attributes(time.reset)$tzone <- Sys.timezone()
time.sleep <- difftime(time.reset, Sys.time(), units = "secs")
Sys.sleep(time.sleep)
}
flu <- twListToDF(searchTwitter("flu", n = 2000, maxID = id.since))
id.since <- tail(flu$id,1)
temp <- subset(flu, !is.na(longitude))
if(nrow(temp)>0){
write.table(temp, "flu.csv",sep = ",", append=TRUE, col.names=!file.exists("flu.csv"), row.names = F)
rows <- rows + nrow(temp)
}
loop.times <- loop.times + 1
}
etCurRateLimitInfo("search")
getCurRateLimitInfo("search")
time.reset <- as.POSIXct(rate[,4], tz="UTC")
attributes(time.reset)$tzone <- Sys.timezone()
time.sleep <- difftime(time.reset, Sys.time(), units = "secs")
time.sleep
while(rows < 20000){
rate <- getCurRateLimitInfo("search")
if(as.numeric(rate[,3]) == 0){
time.reset <- as.POSIXct(rate[,4], tz="UTC")
attributes(time.reset)$tzone <- Sys.timezone()
time.sleep <- difftime(time.reset, Sys.time(), units = "secs")
Sys.sleep(time.sleep)
}
flu <- twListToDF(searchTwitter("flu", n = 180, maxID = id.since))
id.since <- tail(flu$id,1)
temp <- subset(flu, !is.na(longitude))
if(nrow(temp)>0){
write.table(temp, "flu.csv",sep = ",", append=TRUE, col.names=!file.exists("flu.csv"), row.names = F)
rows <- rows + nrow(temp)
}
loop.times <- loop.times + 1
}
time.reset <- as.POSIXct(rate[,4], tz="UTC")
attributes(time.reset)$tzone <- Sys.timezone()
time.sleep <- difftime(time.reset, Sys.time(), units = "secs")
time.sleep
twListToDF(searchTwitter("flu", n = 180, maxID = id.since))
time.sleep <- difftime(time.reset, Sys.time(), units = "secs")
time.sleep
difftime(time.reset, Sys.time(), units = "secs")
difftime(time.reset, Sys.time(), units = "secs")
difftime(time.reset, Sys.time(), units = "secs")
difftime(time.reset, Sys.time(), units = "secs")
difftime(time.reset, Sys.time(), units = "secs")
difftime(time.reset, Sys.time(), units = "secs")
difftime(time.reset, Sys.time(), units = "secs")
getCurRateLimitInfo("search")
twListToDF(searchTwitter("flu+fever+influenza",n = 1))
getCurRateLimitInfo("search")
twListToDF(searchTwitter("flu+fever+influenza",n = 2))
getCurRateLimitInfo("search")
flu <- twListToDF(searchTwitter("flu+fever+influenza",n = 2))
id.since <- tail(flu$id,1)
getCurRateLimitInfo("search")
flu <- twListToDF(searchTwitter("flu+fever+influenza",n = 100))
id.since <- tail(flu$id,1)
getCurRateLimitInfo("search")
rate <- getCurRateLimitInfo("search")
as.numeric(rate[,3])
twListToDF(searchTwitter("flu+fever+influenza",n = 2000))
getCurRateLimitInfo("search")
twListToDF(searchTwitter("flu+fever+influenza",n = 200))
twListToDF(searchTwitter("flu+fever+influenza",n = 110))
getCurRateLimitInfo("search")
twListToDF(searchTwitter("flu+fever+influenza",n = 110))
getCurRateLimitInfo("search")
twListToDF(searchTwitter("flu+fever+influenza",n = 100))
getCurRateLimitInfo("search")
twListToDF(searchTwitter("flu+fever+influenza",n = 101))
etCurRateLimitInfo("search")
getCurRateLimitInfo("search")
while(rows < 20000){
rate <- getCurRateLimitInfo("search")
if(as.numeric(rate[,3]) == 0){
time.reset <- as.POSIXct(rate[,4], tz="UTC")
attributes(time.reset)$tzone <- Sys.timezone()
time.sleep <- difftime(time.reset, Sys.time(), units = "secs")
Sys.sleep(time.sleep)
}
flu <- twListToDF(searchTwitter("flu", n = 100, maxID = id.since))
id.since <- tail(flu$id,1)
temp <- subset(flu, !is.na(longitude))
if(nrow(temp)>0){
write.table(temp, "flu.csv",sep = ",", append=TRUE, col.names=!file.exists("flu.csv"), row.names = F)
rows <- rows + nrow(temp)
}
loop.times <- loop.times + 1
}
while(rows < 20000){
rate <- getCurRateLimitInfo("search")
if(as.numeric(rate[,3]) == 0){
time.reset <- as.POSIXct(rate[,4], tz="UTC")
attributes(time.reset)$tzone <- Sys.timezone()
time.sleep <- difftime(time.reset, Sys.time(), units = "secs")
Sys.sleep(time.sleep)
}
flu <- twListToDF(searchTwitter("flu", n = 100, maxID = id.since,retryOnRateLimit = 100))
id.since <- tail(flu$id,1)
temp <- subset(flu, !is.na(longitude))
if(nrow(temp)>0){
write.table(temp, "flu.csv",sep = ",", append=TRUE, col.names=!file.exists("flu.csv"), row.names = F)
rows <- rows + nrow(temp)
}
loop.times <- loop.times + 1
}
while(rows < 20000){
# rate <- getCurRateLimitInfo("search")
# if(as.numeric(rate[,3]) == 0){
#   time.reset <- as.POSIXct(rate[,4], tz="UTC")
#   attributes(time.reset)$tzone <- Sys.timezone()
#   time.sleep <- difftime(time.reset, Sys.time(), units = "secs")
#   Sys.sleep(time.sleep)
# }
flu <- twListToDF(searchTwitter("flu", n = 100, maxID = id.since,retryOnRateLimit = 3600))
id.since <- tail(flu$id,1)
temp <- subset(flu, !is.na(longitude))
if(nrow(temp)>0){
write.table(temp, "flu.csv",sep = ",", append=TRUE, col.names=!file.exists("flu.csv"), row.names = F)
rows <- rows + nrow(temp)
}
loop.times <- loop.times + 1
}
warnings()
while(rows < 20000){
# rate <- getCurRateLimitInfo("search")
# if(as.numeric(rate[,3]) == 0){
#   time.reset <- as.POSIXct(rate[,4], tz="UTC")
#   attributes(time.reset)$tzone <- Sys.timezone()
#   time.sleep <- difftime(time.reset, Sys.time(), units = "secs")
#   Sys.sleep(time.sleep)
# }
flu <- twListToDF(searchTwitter("flu", n = 2000, maxID = id.since,retryOnRateLimit = 3600))
id.since <- tail(flu$id,1)
temp <- subset(flu, !is.na(longitude))
if(nrow(temp)>0){
write.table(temp, "flu.csv",sep = ",", append=TRUE, col.names=!file.exists("flu.csv"), row.names = F)
rows <- rows + nrow(temp)
}
loop.times <- loop.times + 1
}
while(rows < 20000){
# rate <- getCurRateLimitInfo("search")
# if(as.numeric(rate[,3]) == 0){
#   time.reset <- as.POSIXct(rate[,4], tz="UTC")
#   attributes(time.reset)$tzone <- Sys.timezone()
#   time.sleep <- difftime(time.reset, Sys.time(), units = "secs")
#   Sys.sleep(time.sleep)
# }
flu <- twListToDF(searchTwitter("flu", n = 2000, maxID = id.since,retryOnRateLimit = 3600))
id.since <- tail(flu$id,1)
temp <- subset(flu, !is.na(longitude))
if(nrow(temp)>0){
write.table(temp, "flu.csv",sep = ",", append=TRUE, col.names=!file.exists("flu.csv"), row.names = F)
rows <- rows + nrow(temp)
}
loop.times <- loop.times + 1
}
searchTwitter("flu", n = 100, maxID = id.since,retryOnRateLimit = 3600)
setup_twitter_oauth("dhD8bw5qfjh50dsJW7PStPGQ4",
"cHobMyPYeREhKkhgh5o329AHygFKM2WQt9El1v38OOZ98OyUvh")
searchTwitter("flu", n = 100, maxID = id.since,retryOnRateLimit = 3600)
flu <- twListToDF(searchTwitter("flu+fever+influenza",n = 1))
tail(flu$id,1)
flu <- twListToDF(searchTwitter("influenza",n = 1))
id.since <- tail(flu$id,1)
while(rows < 20000){
# rate <- getCurRateLimitInfo("search")
# if(as.numeric(rate[,3]) == 0){
#   time.reset <- as.POSIXct(rate[,4], tz="UTC")
#   attributes(time.reset)$tzone <- Sys.timezone()
#   time.sleep <- difftime(time.reset, Sys.time(), units = "secs")
#   Sys.sleep(time.sleep)
# }
flu <- twListToDF(searchTwitter("influenza", n = 2000, maxID = id.since,retryOnRateLimit = 3600))
id.since <- tail(flu$id,1)
temp <- subset(flu, !is.na(longitude))
if(nrow(temp)>0){
write.table(temp, "flu.csv",sep = ",", append=TRUE, col.names=!file.exists("flu.csv"), row.names = F)
rows <- rows + nrow(temp)
}
loop.times <- loop.times + 1
}
flu
flu$created
flu.read<- read.csv("flu.csv")
flu
flu$created
flu.read$created
flu <- twListToDF(searchTwitter("influenza",n = 20, until = 2019-02-18))
flu <- twListToDF(searchTwitter("influenza",n = 20, until = "2019-02-18"))
flu <- twListToDF(searchTwitter("influenza",n = 20, until = "2019-02-17"))
flu <- twListToDF(searchTwitter("influenza",n = 20, until = "2018-02-17"))
flu <- twListToDF(searchTwitter("influenza",n = 20, until = "2018-02-20"))
flu <- twListToDF(searchTwitter("influenza",n = 20, until = "2018-02-28"))
flu <- twListToDF(searchTwitter("influenza",n = 20, until = as.POSIXct("2018-2-18", tz="UTC")  ))
flu <- twListToDF(searchTwitter("influenza",n = 20, until = "2018-2-18" ))
flu <- twListToDF(searchTwitter("flu",n = 20, until = "2018-2-18" ))
flu <- twListToDF(searchTwitter("flu",n = 20))
flu <- twListToDF(searchTwitter("flu",n = 20,since = "2018-2-27"))
flu <- twListToDF(searchTwitter("flu",n = 1,since = "2018-2-27"))
while(rows < 20000){
# rate <- getCurRateLimitInfo("search")
# if(as.numeric(rate[,3]) == 0){
#   time.reset <- as.POSIXct(rate[,4], tz="UTC")
#   attributes(time.reset)$tzone <- Sys.timezone()
#   time.sleep <- difftime(time.reset, Sys.time(), units = "secs")
#   Sys.sleep(time.sleep)
# }
#flu <- twListToDF(searchTwitter("flu", n = 2000, maxID = id.since,retryOnRateLimit = 3600))
flu <- twListToDF(searchTwitter("flu", n = 2000, sinceID = id.max,retryOnRateLimit = 3600))
#id.since <- tail(flu$id,1)
id.max <- head(flu$id,1)
temp <- subset(flu, !is.na(longitude))
if(nrow(temp)>0){
write.table(temp, "flu.csv",sep = ",", append=TRUE, col.names=!file.exists("flu.csv"), row.names = F)
rows <- rows + nrow(temp)
}
loop.times <- loop.times + 1
}
